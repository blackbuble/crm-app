{
    "phases": {
        "setup": {
            "nixPkgs": [
                "php83",
                "php83Packages.composer",
                "php83Extensions.mbstring",
                "php83Extensions.pdo",
                "php83Extensions.pdo_mysql",
                "php83Extensions.gd",
                "php83Extensions.zip",
                "php83Extensions.bcmath",
                "php83Extensions.intl",
                "php83Extensions.redis",
                "php83Extensions.dom",
                "php83Extensions.xml",
                "php83Extensions.curl",
                "php83Extensions.fileinfo",
                "php83Extensions.tokenizer"
            ]
        },
        "install": {
            "cmds": [
                "composer install --no-dev --optimize-autoloader --no-interaction --prefer-dist --no-scripts",
                "npm ci --include=dev"
            ]
        },
        "build": {
            "cmds": [
                "composer run-script post-autoload-dump",
                "npm run build",
                "php artisan config:cache",
                "php artisan route:cache",
                "php artisan view:cache",
                "php artisan filament:optimize"
            ]
        }
    },
    "start": {
        "cmd": "php artisan serve --host=0.0.0.0 --port=${PORT:-8080}"
    }
}