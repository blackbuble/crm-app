{
    "phases": {
        "setup": {
            "nixPkgs": [
                "php83",
                "php83Packages.composer"
            ]
        },
        "install": {
            "cmds": [
                "composer install --no-dev --optimize-autoloader --no-interaction --prefer-dist --no-scripts",
                "npm ci --include=dev"
            ]
        },
        "build": {
            "cmds": [
                "composer run-script post-autoload-dump",
                "npm run build",
                "php artisan config:cache",
                "php artisan route:cache",
                "php artisan view:cache",
                "php artisan filament:optimize"
            ]
        }
    },
    "start": {
        "cmd": "php artisan serve --host=0.0.0.0 --port=${PORT:-8080}"
    }
}